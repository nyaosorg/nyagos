[English](./history-4.0_en.md) / Japanese

NYAGOS 4.0.9\_11
================
(2015.12.12)

* Go 1.5.2 でビルド
* インクリメンタルサーチを Ctrl-C で中止できるようにした(#98 Thx @hattya)
* 問合せ抑制オプションを追加(#95,#97 Thx @hattya)
    - /q オプションを copy,move,del,erase,rmdir に追加
* ls: ファイルサイズの幅をディレクトリ毎に計算するようにした (#94 Thx @hattya)
* move: 上書きできるようにした(MoveFileW API を MoveFileExW へ) (#93 Thx @hattya)
* 【蟲繕】lua関数set で `_` を含む変数を展開していなかった (#92)
* 【蟲繕】スペルミスを修正
    - README の「charactor を character」へ (Thx @orthographic-pedant)
* `nyagos.command_not_found` は非推奨とした
    - ドキュメントから削除
    - catalog.d/ezoe.lua を削除
* クラッシュ回避のため(#98)
    - nyagos.prompt をバックグラウンドで実行させるのを禁止
    - パイプラインの2番目以降か、バックグラウンドでの Lua の使用禁止

NYAGOS 4.0.9\_10
================
(2015.09.17)

* Go 1.5.1 でビルド
* 【蟲繕】#88 Ctrl-U がスクロールを考慮していなかった
* 【蟲繕】#87 実行できなかったプロセスの ERRORLEVEL を問合せてクラッシュしていた
* nyagos.prompt が数を返さなかった時、終了させずに、Warning 表示させるだけとした
* 【蟲繕】リダイレクトで作成されたファイルが開きっぱなしになっていた
* make.cmd の改善
* 【蟲繕】nyagos.prompt に interpreter インスタンスが渡されていなかった
* `which` で -a オプションをサポート
* C-w「カーソル上の単語を削除する」を実装 (#85)
* 【蟲繕】PROMPT の $d の月表示がずれていた (Thx @Matsuyanagi)

NYAGOS 4.0.9\_9
===============
(2015.09.07)

* 【蟲繕】内蔵コマンドとエイリアスが ERRORLEVEL を返せなかった問題を修正(#80)
* nyagos.exec が %ERRORLEVEL% とエラーメッセージを返すようにした
* 【蟲繕】`nyagos.on_command_not_found` より nyagos.exec を呼ぶと panic する時があった (#83)
* 【蟲繕】置換型のエイリアス同士をパイプラインでつなぐと panic する時があった (#82)
* 【蟲繕】ディレクトリでないものへの rmdir がプロンプト前にエラーを出さなかった (#81)

NYAGOS 4.0.9\_8
===============
(2015.08.20)

* Go 1.5 にてビルド
* Go のバージョンを、Lua変数 `nyagos.goversion` に格納し、起動時に表示
* 32bit/64bit 双方のビルドをサポート

NYAGOS 4.0.9\_7
===============
(2015.07.29)

* 【蟲繕】「||」だけを入力すると、パニックになる不具合を修正

NYAGOS 4.0.9\_6
===============
(2015.07.21)

* 【蟲繕】nyagos.stat(nil) で panic が発生していた
* 【蟲繕】recover できた panic でスタックトレースが表示されなかった

NYAGOS 4.0.9\_5
===============
(2015.07.15)

* ls のオプション：-S (サイズでソート)、-h (単位付きサイズ表記)を追加
* nyagos.rawexec と nyagos.raweval 関数を追加
* クラッシュ防止のため、同一パイプライン中で複数 Lua コマンドの使用を禁止した
* クラッシュ防止のため、Lua のバックグラウンド実行を禁止した
* 【蟲繕】echo "{a,b}" で「a b」が表示されていた({a,b}と表示されるべき)

NYAGOS 4.0.9\_4
===============
(2015.06.24)

* 【蟲繕】内蔵コマンドでマッチしないワイルドカードが引数なしと等価になってしまっていた
* 【蟲繕】`A ; B` が `A & B` であるかのように動作していた。

NYAGOS 4.0.9\_3
===============
(2015.06.15)

* 【蟲繕】nyagos.stat がリパースポイントで動かなかった。
* 【蟲繕】ls -a が . や .. を表示していなかった(#74)
* 標準出力がコンソールでない時、ls -o のカラー出力を無効にした。

NYAGOS 4.0.9\_2
===============
(2015.06.12)

* 【蟲繕】エイリアス展開の上限が1回になっていた。5回までに変更
* 【蟲繕】パイプライン使用時に nyagos.argsfilter が複数同時に起動していて、クラッシュの原因となっていた。

NYAGOS 4.0.9\_1
===============
(2015.06.03)

* リダイレクトされている時に nyagos.exec() でクラッシュする不具合を修正

NYAGOS 4.0.9\_0
===============
(2015.06.02)

* Luaテーブル `nyagos.env` を追加
* Luaフック `nyagos.on_command_not_found` を追加
* Lua関数 `nyagos.getviewwidth` を追加 (Thx @nocd5)
* キー入力時のサロゲートペアをサポート (Thx @rururutan)
* Lua関数 `nyagos.stat` を追加
* Fix #72 空白とリダイレクト記号の前に空の引数が挿入されていた (Thx @hogewest)
* Luaスクリプトのカタログフォルダー catalog.d を作成した(読み込まれない)
* 拡張子 .py に IronPython か CPython のいずれかを自動で関連づけるようにした (@hattya)
* catalog.d\ezoe.lua を添付(nyagos.d にコピーすると一部エラーを「コマンドではない。」「ディレクトリではない。」におきかえる)

NYAGOS 4.0.8\_0
===============
(2015.05.28)

* UNIX的なシングルクォーテーションをサポート
* Lua関数 `nyagos.getkey()`/`nyagos.getalias()` を追加
* nyagos.alias を `nyagos.setalias` に改名
* nyagos.lua: エイリアス定義テーブル `nyagos.alias` を用意
* nyagos.lua: `x("COMMAND")` がエラーを表示するようにした
* cdlnk.lua: `cd ショートカットファイル` が機能するようにした
* su や clone がアクセスエラーで失敗した時、%COMSPEC% /c NYAGOS.EXE でリトライするようにした
* nyagos.glob 関数が複数のワイルドカード文字列を引数に取れるようにした
* Luaコマンド trash 追加(ファイルをゴミ箱に移動する)
* 使用する nyole.dll を 0.0.0.5 へ変更
* 同梱の lua53.dll を野良ビルド版から、LuaBinaries版へ差し替えた
* lua.exe の同梱をやめた

虫繕い
------
* Fix #66 `echo a>a` で空の aa というファイルが出来てしまう
* suffix.lua で引数の数え方などを間違えていた (#69 Thx hattya)
* nyagos.argsfilter が空の配列を返した時にパニックしていた (#68 Thx hattya)
* ls 後のカラーリセットのエスケープシーケンスを修正 (#67 Thx hattya)

NYAGOS 4.0.7\_5
===============
(2015.05.09)

* Fix #64 Ctrl-T 後のカーソル位置が他のシェルと非互換

NYAGOS 4.0.7\_4
===============
(2015.05.05)

* Fix: 補完で、全てのスラッシュがバックスラッシュに置換される不具合を修正
* Fix #63 ESCAPEキーを押すとクリップボードに空文字列がセットされていた (Thx hokorobi)
* Ctrl-U で削除された文字列をクリップボードにコピーするようにした

NYAGOS 4.0.7\_3
===============
(2015.05.05)

* `SET VAR` で環境変数 VAR を削除するようにした (Thx @pine613)
* lnk.js と1引数で、リンク先ファイルを表示するようにした (#59 Thx @NSP-0123456)
* Ctrl-T (直前の文字二つを入れ替え)をサポート (#62)

不具合修正
----------
* %、1個の後の " を機能文字として認識してできていなかった(#57)
* ワイルドカードの大文字・小文字を区別していた (#58)
* 補完で .\ を削除していた  (#61)
* 引数付き open が機能していなかった

NYAGOS 4.0.7\_2
===============
(2015.04.18)

* 補完で / が常に \ に置き変わる不具合を修正(してもらった) : Thx @nocd5
* nyagos.shellexecute() が失敗した時に、メッセージのないエラーを報告しない不具合を修正
* Luaスクリプトで COM を使うための DLL を同梱・使用([NYOLE.DLL](https://github.com/zetamatta/nyole))

NYAGOS 4.0.7\_1
===============
(2015.04.13)

* 「nyagos -e "LUAコード"」で arg 配列を参照できるようにした

不具合修正
----------
* 「nyagos -f "LUAファイル名」で参照できる arg 配列の要素が一つズレていた。

NYAGOS 4.0.7\_0
===============
(2015.04.13)

* インクリメンタルサーチ(C-r)
* nyagos.exe -e "LUA-CODE" オプションを追加
* 実行ファイルのプロパティにバージョンを設定するようにした
* 「ls 存在しないファイル」の時のエラーメッセージを bash 風に改めた

NYAGOS 4.0.6\_0
===============
(2015.03.19)

* 内蔵コマンド追加: pushd/popd/dirs
* nyagos.bindkey の第一引数に、メソッド boxprint(),firstword(),lastword() を追加
* アンインストールに関して、ドキュメントを更新
* `nyagos.completion_hook` を追加
* git , Subversion , Mercurial 向けのサブコマンド名補完

不具合修正
----------
* 0001.txt,"0001 copy.txt" で 0001 まで打った時に補完が働かなかった。

NYAGOS 4.0.5\_0
===============
(2015.02.07)

* cd -N (N:数字): N回前のカレントディレクトリに移動
* cd -h , cd ? : カレントディレクトリのヒストリを表示
* pwd -N (N:数字): N回前のカレントディレクトリを表示
* %CD% や %ERRORLEVEL% といった変数も補完可能になった

不具合修正
----------
* nyagos.lua で定義されたLua関数 include がエラーを表示しなかった
* コマンド名補完で別ディレクトリの重複する名前を表示していた
* 一行入力で文字列を置き換えた時に末尾にゴミが残る時があった
* ./ を含むパスが補完できなかった
* DELコマンドで壊れたシンボリックリンクを削除できなかった
* & を含むファイル名が補完される時に引用符で囲まれていなかった

内部的な修正
------------
* make.cmd でエコーを一部抑制
* トップの make.cmd で実行ファイルをトップにもコピーするようにした。

NYAGOS 4.0.4\_0
================
(2015.01.19)

* Lua 5.3 対応

NYAGOS 4.0.3\_2
===============
(2015.01.18)

* alias や内蔵コマンドをコマンド名補完できるようにした

BugFix
------
* pwd コマンドが UNC パスで正しく表示しない (#37)
* nyagos.gethistory(大きな値)で落ちる (#38) ※
* `%APPDATA%/NYAOS_ORG/nyagos.history` が更新されない (#39) ※
* `%APPDATA%/NYAOS_ORG/nyagos.history` が存在しない、もしくは空ファイルだと初回コマンド実行時にクラッシュする (#40) ※
* フランス語向けキーボードで AltGr キーを併用したキーが入力ができない (#41)

※ おそらく、SNAPSHOT のみの不具合

NYAGOS 4.0.3\_1
===============
(2014.12.29)

* 補完リストされる環境変数名を % で囲むようにした。
* ls に -h (help)オプションを追加
* nyagos.pathjoin 関数を追加

BugFix
------
* 存在しないファイルを ls に指定した時、エラーメッセージを出していなかった
* pwd コマンド、プロンプトの$Pの英大文字・小文字を実際に合わせるようにした
* コンソールのバッファサイズ==画面サイズと誤認していた不具合を修正

NYAGOS 4.0.3\_0
===============
(2014.12.21)

* 環境変数名を補完できるようにした。

BugFix
-------
* `open *.sln` などでワイルドカードがマッチしなかった時、エラーにならなかった
* makeicon.cmd でアイコンがショートカットに紐つかなかった時があった

Trivial
--------
* VBScript の大文字・小文字を修正した(with [vbsfmt](https://github.com/zetamatta/camelfmt))
* license.txt (New BSD License) を用意
* make.cmd sweep で ~ 付きファイルの削除を

NYAGOS 4.0.2\_2
===============
(2014.12.19)

* makeicon.cmd の作成するショートカットの属性を追加
* make resource を実行しなくとも、windres.exe が %PATH% 上にあれば、アイコンリソース(\*.syso)を自動で作成するようにした。

BugFix
------
* デフォルトの .nyagos で定義している nyagos.prompt関数が原因で、画面幅を誤って認識していた問題を修正 (EXE側もエラー処理を追加)


NYAGOS 4.0.2\_1
===============
(2014.12.15)

* ls -1 をサポート
* デスクトップにアイコンを作成するバッチ・VBScript を添付
* 子プロセスで CMD.EXE を起動した時にプロンプトが乱れないよう、初期状態の .nyagos で、%PROMPT からはエスケープシーケンスを削除し、表示時に追加する nyagos.prompt を定義するようにした。
* ビルドする Go を 1.4 にした。

bugfix
------
* 「copy A B」が B が存在する時、実際にコピーしない不具合を修正
* 相対パスでリンクしているジャンクションを、カレントディレクトリが違う時に rmdir で削除できない不具合を修正


NYAGOS 4.0.2\_0
===============
(2014.12.06)

* source で、ディレクトリ移動も取り込むようにした。
* カーソルの移動量から、Unicode 文字の幅を補正するようにした。
* ALT+英字キーに機能をバインドできるようにした。(例: M\_x)
* 2>&1 , 1>&2 などのリダイレクト、|& パイプラインを実装
* echo,rem,which を内蔵コマンド化
* for 文の為に、alias で空白を含まない引数は二重引用符で囲まないようにした
* for 実行中のプロンプトを > だけにした(エイリアス定義変更)

Bugfix
------
* source で、マルチバイト文字列を含む変数を取り込めない不具合を修正

NYAGOS 4.0.1\_0
================
(2014.11.22)

* 内蔵 ls の高速化
* 内蔵版 copy/move/del/erase/mkdir/rmdir[/s]を用意
* ビルドに MinGW を必要としなくなった
* ヒストリを書き換えた時、Ctrl-C 押下時にヒストリ位置をリセットするようにした (#30 & #34 fixed by @nocd5)
* ヒストリをリアルタイムにセーブするようにした
* `__コマンド名__` をコマンド名の別名に自動定義
* F1～F24,PAGEUP,PAGEDOWN 等、サポートキーの追加

Lua
---
* nyagos.access 関数を追加 (pull request #26 by @mattn)
* nyagos.shellexecute 関数を追加(open/su の自前実装可能になった)
* nyagos.prompt でプロンプト表示を横取りできるようにした。

Bugfix
------
* alias + パイプ + & の場合、標準入力から値を受け取れない不具合を修正(#25 reported by @nocd5)
* リダイレクトでファイルを truncate していなかった(#27 reported by @nocd5)
* conio.GetKey の64bit時の不具合を修正 (#32 fixed by @hattya)

<!-- vim:set fenc=utf8 -->
